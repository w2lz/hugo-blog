---
title: 13 | 为什么表数据删掉一半，表文件大小不变？
date: 2025-02-12T20:27:22+08:00
draft: false
description: 本文深入探讨了 MySQL 中 InnoDB 引擎下的数据库表空间回收问题，特别是在删除数据后表文件大小未发生变化的情况。
categories:
  - MySQL 实战 45 讲
  - MySQL
tags:
  - MySQL 实战 45 讲
  - MySQL
hiddenFromHomePage: false
hiddenFromSearch: false
hiddenFromFeed: false
hiddenFromRelated: false
toc: true
math: false
lightgallery: false
---

{{< admonition quote "摘要" true >}}
本文深入探讨了 MySQL 中 InnoDB 引擎下的数据库表空间回收问题，特别是在删除数据后表文件大小未发生变化的情况。首先介绍了 InnoDB 表的组成结构和参数 innodb_file_per_table 的作用，建议将该参数设置为 ON 以便更好地管理表空间。随后详细说明了数据删除流程，包括记录和数据页的复用，以及删除和插入数据可能导致的空洞问题。最后，介绍了通过重建表来收缩表空间的方法，包括使用 alter table 命令和优化流程。
{{< /admonition >}}

<!--more-->

## 参数 innodb_file_per_table

## 数据删除流程

## 重建表

## Online 和 inplace

## 小结

## 问题
